<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geometry Dash Clone</title>
    <style>
        body{margin:0;background-color:#000;display:flex;justify-content:center;align-items:center;height:100vh;}
        canvas{background-color:#222;}
    </style>
</head>
<body>
    <canvas id="a"></canvas>
    <script>
        const c=document.getElementById("a").getContext("2d");
        const w=800,h=400;let p={x:50,y:300,width:50,height:50,s:0,g:0.8,j:-15,h:false},o=[],g=false,s=0,hb=false,md=200,ow=50,oh=50,hbShrink=0.8;

        function load() {p.h=localStorage.getItem('h')==='true';}
        function grant() {if(s>=10){p.h=true;localStorage.setItem('h','true');}}
        function create() {const l=o[o.length-1];if(!l||l.x<700)o.push({x:w,y:h-oh,width:ow,height:oh});}
        function jump() {if(p.y+p.height>=h)p.s=p.j;}
        function restart() {g=false;s=0;p={x:50,y:300,width:50,height:50,s:0,g:0.8,j:-15,h:localStorage.getItem('h')==='true'};o=[];loop();}
        document.addEventListener('keydown',function(e){if(e.code==='Space'||e.code==='KeyW'){if(!g)jump();}if(e.code==='KeyR'&&g)restart();if(e.code==='KeyO')hb=!hb;});

        function drawPlayer() {c.fillStyle="#FF6347";c.fillRect(p.x,p.y,p.width,p.height);if(p.h)drawCoat();}
        function drawObstacle(b) {c.fillStyle="#FF0000";c.beginPath();c.moveTo(b.x,b.y+b.height);c.lineTo(b.x+b.width/2,b.y);c.lineTo(b.x+b.width,b.y+b.height);c.closePath();c.fill();}
        function drawCoat() {const x=p.x+(p.width/2)-20,y=p.y-40;c.fillStyle="#0000FF";c.fillRect(x,y,40,30);c.fillStyle="yellow";c.beginPath();c.moveTo(x+20,y+5);c.lineTo(x+25,y+20);c.lineTo(x+40,y+20);c.lineTo(x+27,y+30);c.lineTo(x+32,y+45);c.lineTo(x+20,y+35);c.lineTo(x+8,y+45);c.lineTo(x+13,y+30);c.lineTo(x+0,y+20);c.lineTo(x+15,y+20);c.closePath();c.fill();}
        function drawHitbox(b) {const hw=b.width*hbShrink,hh=b.height*hbShrink,hx=b.x+(b.width-hw)/2,hy=b.y+(b.height-hh)/2;c.strokeStyle="yellow";c.strokeRect(hx,hy,hw,hh);}
        function checkCollision(b) {const hw=b.width*hbShrink,hh=b.height*hbShrink,hx=b.x+(b.width-hw)/2,hy=b.y+(b.height-hh)/2;return p.x<hx+hw&&p.x+p.width>hx&&p.y<hy+hh&&p.y+p.height>hy;}
        function loop() {if(g){c.fillStyle="#FFF";c.font="40px Arial";c.fillText("Game Over! Press R to restart.",100,h/2);return;}c.clearRect(0,0,w,h);p.s+=p.g;p.y+=p.s;if(p.y+p.height>h){p.y=h-p.height;p.s=0;}drawPlayer();o.forEach((b,i)=>{b.x-=5;if(b.x+b.width<0){o.splice(i,1);s++;grant();}drawObstacle(b);if(hb)drawHitbox(b);if(checkCollision(b))g=true;});if(Math.random()<0.02)create();c.fillStyle="#FFF";c.font="20px Arial";c.fillText("Score: "+s,10,20);requestAnimationFrame(loop);}
        load();loop();
    </script>
</body>
</html>
